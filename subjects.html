<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Subjects</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
  <h1>Subjects</h1>
  <nav>
    <a href="index.html">Home</a> |
    <a href="subjects.html">Subjects</a> |
    <a href="about.html">About</a>
  </nav>
  <div id="root"></div>

  <script type="text/babel">
    const supabaseUrl = "YOUR_SUPABASE_URL";
    const supabaseKey = "YOUR_SUPABASE_ANON_KEY";
    const supabase = supabase.createClient(supabaseUrl, supabaseKey);

    function SubjectsApp() {
      const [subjects, setSubjects] = React.useState([]);
      const [newSubject, setNewSubject] = React.useState("");

      const fetchSubjects = async () => {
        let { data } = await supabase.from("subjects").select("*");
        setSubjects(data);
      };

      const addSubject = async () => {
        if(newSubject.trim() === "") return;
        await supabase.from("subjects").insert([{ name: newSubject }]);
        setNewSubject("");
        fetchSubjects();
      };

      React.useEffect(() => { fetchSubjects(); }, []);

      return (
        <div style={{ marginTop: "20px" }}>
          <input 
            value={newSubject} 
            onChange={e => setNewSubject(e.target.value)} 
            placeholder="New subject" 
          />
          <button onClick={addSubject}>Add Subject</button>
          <ul>
            {subjects.map(sub => (
              <li key={sub.id}>{sub.name}</li>
            ))}
          </ul>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<SubjectsApp />);
  </script>
</body>
</html>
